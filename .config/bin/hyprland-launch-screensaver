#!/bin/bash

# Exit early if we don't have the tte show
if ! command -v tte &>/dev/null; then
  exit 1
fi

# Exit early if screensave is already running
pgrep -f "alacritty --class Screensaver" && exit 0

for m in $(hyprctl monitors -j | jq -r '.[] | .name'); do
  hyprctl dispatch exec -- "[monitor $m]" \
    alacritty --class Screensaver \
    --config-file ~/.config/alacritty/screensaver.toml \
    -e hyprland-cmd-screensaver
done
